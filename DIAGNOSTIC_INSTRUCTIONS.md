# Инструкция по диагностике проблемы с достижениями

## Проблема
Пользователь сообщает, что в списке достижений отображается "9 / 19", но при открытии экрана достижений список пуст.

## Шаги диагностики

### 1. Запуск диагностики
1. Откройте приложение
2. Перейдите в раздел "Профиль"
3. Прокрутите вниз до секции "Тестовые действия"
4. Нажмите кнопку **"Диагностика достижений"**
5. Изучите отчет в появившемся диалоге

### 2. Анализ отчета
Отчет покажет:
- ✅ **Пользователь найден** - проверка основного пользователя
- ✅ **Статистика найдена** - проверка статистики действий
- ✅ **Достижения в базе** - количество созданных достижений
- ✅ **Достижения пользователя** - записи о выполненных достижениях
- ✅ **GamificationManager** - работа системы геймификации
- ✅ **Анализ соответствия** - проверка логики разблокировки

### 3. Принудительная синхронизация
Если в отчете видны несоответствия:
1. Нажмите кнопку **"Принудительная синхронизация"**
2. Дождитесь сообщения о количестве синхронизированных достижений
3. Вернитесь к экрану достижений и проверьте результат

### 4. Проверка логов
Откройте Android Studio Logcat и найдите сообщения с тегами:
- `AchievementsFragment` - загрузка данных во фрагменте
- `AchievementsAdapter` - отображение элементов в списке
- `GamificationManager` - работа системы достижений
- `AchievementDiagnostics` - результаты диагностики

## Возможные проблемы и решения

### Проблема 1: Достижения есть, но не отображаются
**Симптомы:** Диагностика показывает достижения в базе, но экран пуст
**Решение:** 
- Проверить логи AchievementsAdapter
- Убедиться, что RecyclerView правильно настроен
- Проверить layout файлы item_achievement.xml

### Проблема 2: Статистика и достижения не синхронизированы
**Симптомы:** Высокая статистика (1646 свайпов), но мало выполненных достижений
**Решение:**
- Использовать "Принудительную синхронизацию"
- Проверить логику в GamificationManager.processUserAction()

### Проблема 3: Достижения отсутствуют в базе
**Симптомы:** Диагностика показывает 0 достижений в базе
**Решение:**
- Нажать "Инициализировать достижения"
- Перезапустить приложение

### Проблема 4: Проблемы с пользователем
**Симптомы:** Пользователь не найден или статистика отсутствует
**Решение:**
- Перейти в раздел профиля
- Проверить, что пользователь создан
- При необходимости очистить данные приложения

## Дополнительные команды

### Тестовые кнопки
Для проверки работы системы:
- **"Имитировать свайп"** - добавляет свайп и проверяет разблокировку достижений
- **"Имитировать оценку"** - добавляет оценку
- **"Имитировать рецензию"** - добавляет рецензию  
- **"Имитировать просмотр"** - добавляет просмотренный элемент

### Сброс данных
Если проблема критическая:
1. Удалить приложение
2. Переустановить приложение
3. Система автоматически создаст нового пользователя и достижения

## Ожидаемый результат
После успешной диагностики и исправления:
- Экран достижений показывает 19 достижений
- Выполненные достижения (около 9) отображаются с зеленой меткой
- Невыполненные достижения показывают прогресс в процентах
- Статистика корректно влияет на разблокировку новых достижений
